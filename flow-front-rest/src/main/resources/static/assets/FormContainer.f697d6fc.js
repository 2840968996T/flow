import{L as P,a as W,cM as j,eM as x,bA as N,v as r,bQ as S,h as n,ar as y,aF as p,o as k,f as J,m as i,z as u,l as c}from"./index.a19a7b59.js";import{D as O,a as $}from"./index.58101a82.js";import{T as K}from"./index.886f7bb4.js";import"./index.5e1a3b76.js";import{T as M}from"./index.ed10a482.js";import{D as L}from"./index.55df64f0.js";import U from"./index.1f075784.js";import{D as V,u as q}from"./index.a54420f2.js";import{e as z,f as G}from"./process.10a62b0a.js";import{R as Q,C as H}from"./index.822cef18.js";import"./useFlexGapSupport.c0a56c4d.js";import"./transButton.7523e23a.js";import"./CopyOutlined.686d97cf.js";import"./useWindowSizeFn.c0064585.js";import"./get.435241c6.js";const X=[{field:"name",label:"\u63D0\u4EA4\u4EBA"},{field:"companyName",label:"\u63D0\u4EA4\u5355\u4F4D"},{field:"deptName",label:"\u63D0\u4EA4\u90E8\u95E8"},{field:"mobile",label:"\u624B\u673A\u53F7"},{field:"createTime",label:"\u63D0\u4EA4\u65F6\u95F4"}],Y=W({name:"FormContainer",components:{Descriptions:O,DescriptionsItem:$,Tag:K,Row:Q,Col:H,CollapseContainer:j,FramePage:U,Divider:L,TypographyTitle:M.Title,Description:V,Skeleton:x},props:{startorBaseInfo:{type:Object,default:null},formType:{type:Number,default:-1}},setup(f){const d=N();function F(){d("/process/launch")}const D=r({}),g=r(!1),_=r(null),a=r(""),{currentRoute:s}=S(),l=r(null),h=r(),m=r(),[I,{setDescProps:v}]=q({bordered:!1,schema:X}),{path:ae,params:{modelKey:C},query:{procInstId:b}}=n(s);y(()=>{a.value="/form-making/custom.html#/?modelKey="+C+"&formType=custom",E()});function B(o){v({data:o})}function E(){z({modelKey:C}).then(o=>{setTimeout(()=>{var t;const e=n(n(m).frameRef);e&&((t=e.contentWindow)!=null&&t.vueObj&&e.contentWindow.CustomForm.loadFormInfo({formJson:o.formJson,editData:null}),e.onload=function(){e.contentWindow.CustomForm.loadFormInfo({formJson:o.formJson,editData:null}),b&&G({procInstId:b}).then(A=>{e.contentWindow.CustomForm.setFormData(JSON.parse(A.formData),!1)})})},0)})}function R(o){var t;const e=n(n(m).frameRef);return e&&((t=e.contentWindow)==null?void 0:t.vueObj)?e.contentWindow.CustomForm.geFormData(o):Promise.reject("\u8868\u5355\u52A0\u8F7D\u5F02\u5E38!")}function w(o){y(()=>{var t;const e=n(n(m).frameRef);debugger;return e&&((t=e.contentWindow)==null?void 0:t.vueObj)?e.contentWindow.CustomForm.seFormData(o):Promise.reject("\u8868\u5355\u52A0\u8F7D\u5F02\u5E38!")})}function T(o,e){return n(h).triggerEvent(o,e)}return{toLaunch:F,formUrl:a,framePageRef:_,baseFormInfo:D,showBaseFormInfo:g,setStartorBaseInfo:B,getFormData:R,setFormData:w,triggerEvent:T,generateFormRef:h,formRenderFrameRef:m,jsonData:l,registerFlowBaseInfo:I}}}),Z={class:""},ee=c("div",{class:"font-bold"},"\u57FA\u672C\u4FE1\u606F",-1),oe={style:{padding:"0 16px"}},te=c("div",{class:"font-bold"},"\u8868\u5355\u5185\u5BB9",-1),ne={style:{"min-height":"300px"}};function re(f,d,F,D,g,_){const a=p("Description"),s=p("CollapseContainer"),l=p("FramePage");return k(),J("div",Z,[i(s,{canExpan:!0,class:"mt-2"},{title:u(()=>[ee]),default:u(()=>[c("div",oe,[i(a,{onRegister:f.registerFlowBaseInfo},null,8,["onRegister"])])]),_:1}),i(s,{canExpan:!0,class:"mt-2"},{title:u(()=>[te]),default:u(()=>[c("div",ne,[i(l,{ref:"formRenderFrameRef",frameSrc:f.formUrl},null,8,["frameSrc"])])]),_:1})])}var be=P(Y,[["render",re]]);export{be as default};
