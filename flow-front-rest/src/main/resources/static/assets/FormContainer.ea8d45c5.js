import{L as x,a as P,cM as W,eM as j,bA as N,v as r,bQ as S,h as n,ar as y,aF as p,o as k,f as J,m as i,z as u,l as f}from"./index.920900a8.js";import{D as O,a as $}from"./index.17c49fb5.js";import{T as K}from"./index.0451feda.js";import"./index.d02f570d.js";import{T as M}from"./index.d6a0da2c.js";import{D as L}from"./index.e56b35c5.js";import U from"./index.2f796de2.js";import{D as V,u as q}from"./index.0c73b821.js";import{e as z,f as G}from"./process.2827318c.js";import{R as Q,C as H}from"./index.088b2d5a.js";import"./useFlexGapSupport.e39df451.js";import"./transButton.381aadd1.js";import"./CopyOutlined.ed5af14e.js";import"./useWindowSizeFn.f80f3edd.js";import"./get.527e98bc.js";const X=[{field:"name",label:"\u63D0\u4EA4\u4EBA"},{field:"companyName",label:"\u63D0\u4EA4\u5355\u4F4D"},{field:"deptName",label:"\u63D0\u4EA4\u90E8\u95E8"},{field:"mobile",label:"\u624B\u673A\u53F7"},{field:"createTime",label:"\u63D0\u4EA4\u65F6\u95F4"}],Y=P({name:"FormContainer",components:{Descriptions:O,DescriptionsItem:$,Tag:K,Row:Q,Col:H,CollapseContainer:W,FramePage:U,Divider:L,TypographyTitle:M.Title,Description:V,Skeleton:j},props:{startorBaseInfo:{type:Object,default:null},formType:{type:Number,default:-1}},setup(c){const d=N();function F(){d("/process/launch")}const D=r({}),g=r(!1),_=r(null),a=r(""),{currentRoute:s}=S(),l=r(null),h=r(),m=r(),[I,{setDescProps:v}]=q({bordered:!1,schema:X}),{path:ae,params:{modelKey:C},query:{procInstId:b}}=n(s);y(()=>{a.value="/form-making/index.html#/?modelKey="+C+"&formType=custom",E()});function B(o){v({data:o})}function E(){z({modelKey:C}).then(o=>{setTimeout(()=>{var t;const e=n(n(m).frameRef);e&&((t=e.contentWindow)!=null&&t.vueObj&&e.contentWindow.CustomForm.loadFormInfo({formJson:o.formJson,editData:null}),e.onload=function(){e.contentWindow.CustomForm.loadFormInfo({formJson:o.formJson,editData:null}),b&&G({procInstId:b}).then(A=>{e.contentWindow.CustomForm.setFormData(JSON.parse(A.formData),!1)})})},0)})}function R(o){var t;const e=n(n(m).frameRef);return e&&((t=e.contentWindow)==null?void 0:t.vueObj)?e.contentWindow.CustomForm.geFormData(o):Promise.reject("\u8868\u5355\u52A0\u8F7D\u5F02\u5E38!")}function w(o){y(()=>{var t;const e=n(n(m).frameRef);debugger;return e&&((t=e.contentWindow)==null?void 0:t.vueObj)?e.contentWindow.CustomForm.seFormData(o):Promise.reject("\u8868\u5355\u52A0\u8F7D\u5F02\u5E38!")})}function T(o,e){return n(h).triggerEvent(o,e)}return{toLaunch:F,formUrl:a,framePageRef:_,baseFormInfo:D,showBaseFormInfo:g,setStartorBaseInfo:B,getFormData:R,setFormData:w,triggerEvent:T,generateFormRef:h,formRenderFrameRef:m,jsonData:l,registerFlowBaseInfo:I}}}),Z={class:""},ee=f("div",{class:"font-bold"},"\u57FA\u672C\u4FE1\u606F",-1),oe={style:{padding:"0 16px"}},te=f("div",{class:"font-bold"},"\u8868\u5355\u5185\u5BB9",-1),ne={style:{"min-height":"300px"}};function re(c,d,F,D,g,_){const a=p("Description"),s=p("CollapseContainer"),l=p("FramePage");return k(),J("div",Z,[i(s,{canExpan:!0,class:"mt-2"},{title:u(()=>[ee]),default:u(()=>[f("div",oe,[i(a,{onRegister:c.registerFlowBaseInfo},null,8,["onRegister"])])]),_:1}),i(s,{canExpan:!0,class:"mt-2"},{title:u(()=>[te]),default:u(()=>[f("div",ne,[i(l,{ref:"formRenderFrameRef",frameSrc:c.formUrl},null,8,["frameSrc"])])]),_:1})])}var be=x(Y,[["render",re]]);export{be as default};
