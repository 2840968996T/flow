import{B as e,a as t}from"./index.d9d5a299.js";import{_ as o}from"./TableImg.b6d344fe.js";import{_ as s,f as a}from"./BasicForm.8c0fc6b8.js";import{u as n}from"./useTable.01abb634.js";import{g as i}from"./role.2cc3b1b8.js";import{P as r}from"./index.30fbc9dc.js";import d from"./CompanyTree.3da58eb7.js";import{j as l,i as c,K as m,o as p,m as f,Q as b,n as u,N as j}from"./vendor.686fd1d4.js";import"./index.44a64fe8.js";import"./useWindowSizeFn.d82e06bf.js";/* empty css              *//* empty css              */import"./useForm.ed657ed4.js";/* empty css              *//* empty css              *//* empty css              */import"./uuid.2b29000c.js";import"./onMountedOrActivated.172ad1ec.js";/* empty css              */import"./useSortable.928c6068.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./index.0c9671c6.js";/* empty css              *//* empty css              *//* empty css              */import"./download.755feeb8.js";import"./base64Conver.bb012c73.js";import"./index.ee1d6750.js";import"./useContentViewHeight.7797c6a9.js";/* empty css              *//* empty css              */import"./Tree.vue_vue&type=style&index=0&lang.4ac4e64b.js";import"./useContextMenu.2be85cf6.js";import"./company.6c2287db.js";const x=[{title:"名称",dataIndex:"name",width:150,align:"left"},{title:"标识",dataIndex:"sn",width:120,align:"left"},{title:"公司",dataIndex:"companyName",width:120,align:"left"}],h=[{field:"keyword",label:"关键字",component:"Input",labelWidth:60,colProps:{span:12,lg:{span:12,offset:0},sm:{span:10,offset:0},xs:{span:16,offset:0}}}];var g=l({name:"RoleSelector",components:{BasicModal:e,BasicForm:s,BasicTable:o,PageWrapper:r,CompanyTree:d,TableAction:a},setup(e,{emit:o}){let s="";const[a,{setModalProps:r,closeModal:d}]=t((e=>{return t=this,o=null,a=function*(){r({wrapClassName:"selector-content"}),s=e.personalId,m({searchInfo:{personalId:s}})},new Promise(((e,s)=>{var n=e=>{try{r(a.next(e))}catch(t){s(t)}},i=e=>{try{r(a.throw(e))}catch(t){s(t)}},r=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,i);r((a=a.apply(t,o)).next())}));var t,o,a})),[l,{reload:m,getSelectRows:p}]=n({title:"",api:i,immediate:!1,columns:x,rowSelection:{type:"checkbox",columnWidth:30},formConfig:{labelWidth:60,schemas:h,showResetButton:!1,showAdvancedButton:!1,autoSubmitOnEnter:!0},size:"small",canResize:!1,useSearchForm:!0,showTableSetting:!1,showIndexColumn:!1,bordered:!0,scroll:{y:300}});return{registerTable:l,registerModal:a,getTitle:c((()=>"选择角色")),handleSubmit:function(){const e=p();o("success",e),d()},handleSuccess:function(){m()},handleSelect:function(e){let t={companyId:e?e.id:"",personalId:s};m({searchInfo:t})}}}});g.render=function(e,t,o,s,a,n){const i=m("CompanyTree"),r=m("BasicTable"),d=m("PageWrapper"),l=m("BasicModal");return p(),f(l,j({wrapClassName:"selector-body"},e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:b((()=>[u(d,{dense:"",contentClass:"flex"},{default:b((()=>[u(i,{class:"w-1/4 xl:w-3/10",onSelect:e.handleSelect},null,8,["onSelect"]),u(r,{onRegister:e.registerTable,class:"w-3/4 xl:w-7/10"},null,8,["onRegister"])])),_:1})])),_:1},16,["onRegister","title","onOk"])};export default g;
