var L=Object.defineProperty,O=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var v=(e,t,o)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,E=(e,t)=>{for(var o in t||(t={}))$.call(t,o)&&v(e,o,t[o]);if(F)for(var o of F(t))U.call(t,o)&&v(e,o,t[o]);return e},_=(e,t)=>O(e,R(t));var g=(e,t,o)=>new Promise((m,n)=>{var c=i=>{try{p(o.next(i))}catch(s){n(s)}},l=i=>{try{p(o.throw(i))}catch(s){n(s)}},p=i=>i.done?m(i.value):Promise.resolve(i.value).then(c,l);p((o=o.apply(e,t)).next())});import{B as A,a as G}from"./index.88470e0c.js";import{B as D}from"./BasicForm.e5f615e6.js";import{u as I}from"./useForm.0cbae54a.js";import{b as N}from"./account.data.6cac8882.js";import{b as P}from"./account.bea2e3e2.js";import{g as T}from"./group.dd7bb45d.js";import{az as V,a as j,cX as z,w as B,j as M,h as W,aB as h,o as X,k as q,B as b,p as C,aC as H}from"./index.e1964776.js";import"./useWindowSizeFn.a30c5409.js";import"./FullscreenOutlined.449a4f2d.js";/* empty css              *//* empty css               */import"./index.41617e4d.js";import"./index.25019af6.js";import"./Checkbox.e5f92db0.js";import"./index.3a164815.js";import"./index.1b277829.js";import"./index.99ffc75a.js";import"./index.c8515968.js";import"./index.db622673.js";import"./get.6b7894e0.js";import"./index.b3d10dbf.js";import"./eagerComputed.83fd49b0.js";import"./index.fc9b4c53.js";import"./_baseIteratee.ad9ab737.js";import"./DeleteOutlined.5791f905.js";import"./index.c908afe0.js";import"./useRefs.766f225b.js";import"./Form.e643baa9.js";import"./Col.e011966c.js";import"./useFlexGapSupport.5550da35.js";import"./useSize.5fbb5cc9.js";import"./transButton.2db6a2b1.js";import"./index.8373f7dc.js";import"./index.27e2f730.js";import"./index.657a2808.js";import"./uuid.2b29000c.js";import"./download.6d3644ac.js";import"./base64Conver.08b9f4ec.js";import"./index.bc6756fd.js";import"./index.ec5c8d0f.js";import"./uniqBy.fd3e0b27.js";const J=j({name:"AccountModal",components:{BasicModal:A,BasicForm:D,Select:z},emits:["success","register"],setup(e,{emit:t}){const o=B(!0),m=B([]),n=B("\u8BBE\u7F6E\u7EC4"),[c,{setFieldsValue:l,updateSchema:p,resetFields:i,validate:s}]=I({labelWidth:100,schemas:N,showActionButtonGroup:!1,actionColOptions:{span:23}}),[d,{setModalProps:u,closeModal:S}]=G(r=>g(this,null,function*(){i(),u({confirmLoading:!1,title:"\u7ED9\u8D26\u53F7\u3010"+r.record.realName+"("+r.record.username+")\u3011\u8BBE\u7F6E\u7EC4"}),o.value=!!(r!=null&&r.isUpdate);const f=yield T();if(f.forEach(a=>{a.label=a.name,a.value=a.id}),m.value=f,M(o)){let a=r.record.groups||[];a=a.map(y=>y.id),l(_(E({},r.record),{groups:a}))}}));let w=W(()=>M(o)?n.value:"\u65B0\u589E");function k(){return g(this,null,function*(){try{u({confirmLoading:!0});const r=yield s();r.groups=r.groups.map(f=>({id:f})),r.userId=r.id,delete r.id,yield P(r),S(),t("success")}finally{u({confirmLoading:!1})}})}return{registerModal:d,registerForm:c,getTitle:w,groupOptions:m,handleSubmit:k}}});function K(e,t,o,m,n,c){const l=h("Select"),p=h("BasicForm"),i=h("BasicModal");return X(),q(i,H(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:b(()=>[C(p,{onRegister:e.registerForm},{groups:b(({model:s,field:d})=>[C(l,{value:s[d],"onUpdate:value":u=>s[d]=u,mode:"multiple",style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u7EC4","option-label-prop":"label",options:e.groupOptions},null,8,["value","onUpdate:value","options"])]),_:1},8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var Po=V(J,[["render",K]]);export{Po as default};
