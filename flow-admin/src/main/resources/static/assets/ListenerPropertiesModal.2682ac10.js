var _=Object.defineProperty;var d=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var f=(o,r,e)=>r in o?_(o,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[r]=e,g=(o,r)=>{for(var e in r||(r={}))b.call(r,e)&&f(o,e,r[e]);if(d)for(var e of d(r))w.call(r,e)&&f(o,e,r[e]);return o};var c=(o,r,e)=>new Promise((p,a)=>{var u=s=>{try{i(e.next(s))}catch(n){a(n)}},m=s=>{try{i(e.throw(s))}catch(n){a(n)}},i=s=>s.done?p(s.value):Promise.resolve(s.value).then(u,m);i((e=e.apply(o,r)).next())});import{B as k,a as C}from"./index.88470e0c.js";import{B as P}from"./BasicForm.e5f615e6.js";import{u as A}from"./useForm.0cbae54a.js";import{k as D,l as L}from"./listener.data.3378f011.js";import{az as R,a as $,w as S,h as T,j as x,aB as B,o as O,k as U,B as V,p as j,aC as q}from"./index.e1964776.js";import"./useWindowSizeFn.a30c5409.js";import"./FullscreenOutlined.449a4f2d.js";/* empty css              *//* empty css               */import"./index.41617e4d.js";import"./index.25019af6.js";import"./Checkbox.e5f92db0.js";import"./index.3a164815.js";import"./index.1b277829.js";import"./index.99ffc75a.js";import"./index.c8515968.js";import"./index.db622673.js";import"./get.6b7894e0.js";import"./index.b3d10dbf.js";import"./eagerComputed.83fd49b0.js";import"./index.fc9b4c53.js";import"./_baseIteratee.ad9ab737.js";import"./DeleteOutlined.5791f905.js";import"./index.c908afe0.js";import"./useRefs.766f225b.js";import"./Form.e643baa9.js";import"./Col.e011966c.js";import"./useFlexGapSupport.5550da35.js";import"./useSize.5fbb5cc9.js";import"./transButton.2db6a2b1.js";import"./index.8373f7dc.js";import"./index.27e2f730.js";import"./index.657a2808.js";import"./uuid.2b29000c.js";import"./download.6d3644ac.js";import"./base64Conver.08b9f4ec.js";import"./index.bc6756fd.js";import"./index.ec5c8d0f.js";import"./uniqBy.fd3e0b27.js";const z=$({name:"ListenerPropertiesModal",components:{BasicModal:k,BasicForm:P},emits:["success","register"],setup(o,{emit:r}){const e=S(!0);let p=[{label:"\u5B57\u7B26\u4E32",value:"string"},{label:"\u8868\u8FBE\u5F0F",value:"expression"}],a={};p.forEach(t=>{a[t.value]=t.label});const[u,{resetFields:m,updateSchema:i,setFieldsValue:s,validate:n}]=A({labelWidth:100,schemas:D,showActionButtonGroup:!1}),[F,{setModalProps:l,closeModal:h}]=C(t=>c(this,null,function*(){yield m(),l({confirmLoading:!1}),e.value=!!(t!=null&&t.isUpdate);let M=t.record;i({field:"value",label:a[M.type]}),yield i([{field:"type",componentProps:{options:p,onChange:y=>{i({field:"value",label:a[y.target.value]})}}},{field:"name",dynamicRules:()=>[{required:!0,whitespace:!0,message:"\u6807\u8BC6\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{max:80,message:"\u5B57\u7B26\u957F\u5EA6\u4E0D\u80FD\u5927\u4E8E80\uFF01"}]}]),s(g({},t.record))})),v=T(()=>x(e)?"\u4FEE\u6539":"\u65B0\u589E");function E(){return c(this,null,function*(){try{l({confirmLoading:!0});const t=yield n();yield L(t),h(),r("success")}finally{l({confirmLoading:!1})}})}return{registerModal:F,registerForm:u,getTitle:v,handleSubmit:E}}});function G(o,r,e,p,a,u){const m=B("BasicForm"),i=B("BasicModal");return O(),U(i,q(o.$attrs,{onRegister:o.registerModal,title:o.getTitle,onOk:o.handleSubmit}),{default:V(()=>[j(m,{onRegister:o.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var De=R(z,[["render",G]]);export{De as default};
