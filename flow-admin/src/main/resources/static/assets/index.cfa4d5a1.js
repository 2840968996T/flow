import{_ as e,a as t}from"./useModal.b44b8cab.js";import{_ as o}from"./TableImg.7eb6c017.js";import{_ as a,f as s}from"./BasicForm.86cd97da.js";import{u as n}from"./useTable.5323312b.js";import{g as r}from"./role.1a9659e1.js";import{_ as i}from"./PageWrapper.ba7be9e5.js";import l from"./CompanyTree.ec488b05.js";import{k as d,f as m,K as c,o as p,n as f,Q as u,q as b,N as j}from"./vendor.bc3b2d68.js";import"./index.33a0330f.js";import"./useWindowSizeFn.ade0e88c.js";/* empty css              *//* empty css              */import"./useForm.87ab8aa1.js";/* empty css              *//* empty css              *//* empty css              */import"./uuid.c53863e7.js";import"./onMountedOrActivated.06aaefd7.js";/* empty css              */import"./useSortable.a66d7f9a.js";import"./useExpose.c4c32617.js";/* empty css              *//* empty css              *//* empty css              */import"./CountdownInput.0bc8da65.js";/* empty css              *//* empty css              */import"./download.5032960b.js";import"./StrengthMeter.ae9219d5.js";import"./usePageContext.a11cc1be.js";/* empty css              *//* empty css              */import"./Tree.vue_vue&type=style&index=0&lang.5d1be1b0.js";import"./useContextMenu.4afbb1e4.js";import"./company.22895a80.js";const x=[{title:"名称",dataIndex:"name",width:150,align:"left"},{title:"标识",dataIndex:"sn",width:120,align:"left"},{title:"公司",dataIndex:"companyName",width:120,align:"left"}],h=[{field:"keyword",label:"关键字",component:"Input",labelWidth:60,colProps:{span:12,lg:{span:12,offset:0},sm:{span:10,offset:0},xs:{span:16,offset:0}}}];var g=d({name:"RoleSelector",components:{BasicModal:e,BasicForm:a,BasicTable:o,PageWrapper:i,CompanyTree:l,TableAction:s},setup(e,{emit:o}){let a="";const[s,{setModalProps:i,closeModal:l}]=t((e=>{return t=this,o=null,s=function*(){i({wrapClassName:"selector-content"}),a=e.personalId,c({searchInfo:{personalId:a}})},new Promise(((e,a)=>{var n=e=>{try{i(s.next(e))}catch(t){a(t)}},r=e=>{try{i(s.throw(e))}catch(t){a(t)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,r);i((s=s.apply(t,o)).next())}));var t,o,s})),[d,{reload:c,getSelectRows:p}]=n({title:"",api:r,immediate:!1,columns:x,rowSelection:{type:"checkbox",columnWidth:30},formConfig:{labelWidth:60,schemas:h,showResetButton:!1,showAdvancedButton:!1,autoSubmitOnEnter:!0},size:"small",canResize:!1,useSearchForm:!0,showTableSetting:!1,showIndexColumn:!1,bordered:!0,scroll:{y:300}});return{registerTable:d,registerModal:s,getTitle:m((()=>"选择角色")),handleSubmit:function(){const e=p();o("success",e),l()},handleSuccess:function(){c()},handleSelect:function(e){let t={companyId:e?e.id:"",personalId:a};c({searchInfo:t})}}}});g.render=function(e,t,o,a,s,n){const r=c("CompanyTree"),i=c("BasicTable"),l=c("PageWrapper"),d=c("BasicModal");return p(),f(d,j({wrapClassName:"selector-body"},e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:u((()=>[b(l,{dense:"",contentClass:"flex"},{default:u((()=>[b(r,{class:"w-1/4 xl:w-3/10",onSelect:e.handleSelect},null,8,["onSelect"]),b(i,{onRegister:e.registerTable,class:"w-3/4 xl:w-7/10"},null,8,["onRegister"])])),_:1})])),_:1},16,["onRegister","title","onOk"])};export default g;
