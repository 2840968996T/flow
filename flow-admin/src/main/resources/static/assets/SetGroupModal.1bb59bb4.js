var L=Object.defineProperty,O=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var v=(e,t,o)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,E=(e,t)=>{for(var o in t||(t={}))$.call(t,o)&&v(e,o,t[o]);if(F)for(var o of F(t))U.call(t,o)&&v(e,o,t[o]);return e},_=(e,t)=>O(e,R(t));var g=(e,t,o)=>new Promise((m,n)=>{var c=i=>{try{p(o.next(i))}catch(s){n(s)}},l=i=>{try{p(o.throw(i))}catch(s){n(s)}},p=i=>i.done?m(i.value):Promise.resolve(i.value).then(c,l);p((o=o.apply(e,t)).next())});import{B as A,a as G}from"./index.4ff668bf.js";import{B as D}from"./BasicForm.d8aa86d3.js";import{u as I}from"./useForm.d7bb3373.js";import{b as N}from"./account.data.695d2994.js";import{b as P}from"./account.de61d66b.js";import{g as T}from"./group.e5e6caab.js";import{az as V,a as q,cY as z,x as B,k as M,h as W,aB as h,i as Y,l as j,C,q as b,aC as H}from"./index.ef013507.js";import"./useWindowSizeFn.37be93ea.js";import"./FullscreenOutlined.d97e6502.js";/* empty css              *//* empty css               */import"./index.8a7cb11f.js";import"./index.64234a26.js";import"./Checkbox.d561740d.js";import"./index.d845ac75.js";import"./index.0b0495b0.js";import"./index.4822de2c.js";import"./index.7f88299e.js";import"./index.0e08ed6e.js";import"./get.fbc063d7.js";import"./index.4dfcf0e9.js";import"./eagerComputed.487f958f.js";import"./index.ac5849f2.js";import"./_baseIteratee.39b06e56.js";import"./DeleteOutlined.fda42126.js";import"./index.7e4b5f10.js";import"./useRefs.5ed2b70f.js";import"./Form.36fbea16.js";import"./Col.55ed0272.js";import"./useFlexGapSupport.e51c8524.js";import"./useSize.55446702.js";import"./transButton.750f7635.js";import"./index.edd8ff4a.js";import"./index.0bfe1343.js";import"./index.27c2d820.js";import"./uuid.2b29000c.js";import"./download.c25570af.js";import"./base64Conver.08b9f4ec.js";import"./index.30e1f68c.js";import"./index.4e2ec58e.js";import"./uniqBy.4bac5850.js";const J=q({name:"AccountModal",components:{BasicModal:A,BasicForm:D,Select:z},emits:["success","register"],setup(e,{emit:t}){const o=B(!0),m=B([]),n=B("\u8BBE\u7F6E\u7EC4"),[c,{setFieldsValue:l,updateSchema:p,resetFields:i,validate:s}]=I({labelWidth:100,schemas:N,showActionButtonGroup:!1,actionColOptions:{span:23}}),[d,{setModalProps:u,closeModal:S}]=G(r=>g(this,null,function*(){i(),u({confirmLoading:!1,title:"\u7ED9\u8D26\u53F7\u3010"+r.record.realName+"("+r.record.username+")\u3011\u8BBE\u7F6E\u7EC4"}),o.value=!!(r!=null&&r.isUpdate);const f=yield T();if(f.forEach(a=>{a.label=a.name,a.value=a.id}),m.value=f,M(o)){let a=r.record.groups||[];a=a.map(y=>y.id),l(_(E({},r.record),{groups:a}))}}));let w=W(()=>M(o)?n.value:"\u65B0\u589E");function k(){return g(this,null,function*(){try{u({confirmLoading:!0});const r=yield s();r.groups=r.groups.map(f=>({id:f})),r.userId=r.id,delete r.id,yield P(r),S(),t("success")}finally{u({confirmLoading:!1})}})}return{registerModal:d,registerForm:c,getTitle:w,groupOptions:m,handleSubmit:k}}});function K(e,t,o,m,n,c){const l=h("Select"),p=h("BasicForm"),i=h("BasicModal");return Y(),j(i,H(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:C(()=>[b(p,{onRegister:e.registerForm},{groups:C(({model:s,field:d})=>[b(l,{value:s[d],"onUpdate:value":u=>s[d]=u,mode:"multiple",style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u7EC4","option-label-prop":"label",options:e.groupOptions},null,8,["value","onUpdate:value","options"])]),_:1},8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var Po=V(J,[["render",K]]);export{Po as default};
