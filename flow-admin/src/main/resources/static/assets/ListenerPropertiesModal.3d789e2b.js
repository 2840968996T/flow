var _=Object.defineProperty;var d=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var f=(o,r,e)=>r in o?_(o,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[r]=e,g=(o,r)=>{for(var e in r||(r={}))b.call(r,e)&&f(o,e,r[e]);if(d)for(var e of d(r))w.call(r,e)&&f(o,e,r[e]);return o};var c=(o,r,e)=>new Promise((p,a)=>{var u=s=>{try{i(e.next(s))}catch(n){a(n)}},m=s=>{try{i(e.throw(s))}catch(n){a(n)}},i=s=>s.done?p(s.value):Promise.resolve(s.value).then(u,m);i((e=e.apply(o,r)).next())});import{B as k,a as C}from"./index.61c914e7.js";import{B as P}from"./BasicForm.d977d74c.js";import{u as A}from"./useForm.d5452096.js";import{k as D,l as L}from"./listener.data.90ef8211.js";import{az as R,a as $,w as S,h as T,j as x,aB as B,o as O,k as U,B as V,p as j,aC as q}from"./index.7ea10544.js";import"./useWindowSizeFn.3dc14e02.js";import"./FullscreenOutlined.8864dded.js";/* empty css              *//* empty css               */import"./index.5d6fdc93.js";import"./index.e5a472bb.js";import"./Checkbox.fc744a85.js";import"./index.f8eff8ab.js";import"./index.6954dcaa.js";import"./index.cca6a300.js";import"./index.c247c1b6.js";import"./index.c6794bd1.js";import"./get.4066932b.js";import"./index.60e2cd93.js";import"./eagerComputed.087e7096.js";import"./index.c5147852.js";import"./_baseIteratee.31b374d5.js";import"./DeleteOutlined.f1932d42.js";import"./index.e40c323f.js";import"./useRefs.08da6c2b.js";import"./Form.6886a72a.js";import"./Col.a6a2600f.js";import"./useFlexGapSupport.5af5008f.js";import"./useSize.b4cfb06d.js";import"./transButton.331b5127.js";import"./index.a8777167.js";import"./index.d3af8cb2.js";import"./index.32756aa0.js";import"./uuid.2b29000c.js";import"./download.bfb09172.js";import"./base64Conver.08b9f4ec.js";import"./index.245189e1.js";import"./index.2f8b90c5.js";import"./uniqBy.fea10226.js";const z=$({name:"ListenerPropertiesModal",components:{BasicModal:k,BasicForm:P},emits:["success","register"],setup(o,{emit:r}){const e=S(!0);let p=[{label:"\u5B57\u7B26\u4E32",value:"string"},{label:"\u8868\u8FBE\u5F0F",value:"expression"}],a={};p.forEach(t=>{a[t.value]=t.label});const[u,{resetFields:m,updateSchema:i,setFieldsValue:s,validate:n}]=A({labelWidth:100,schemas:D,showActionButtonGroup:!1}),[F,{setModalProps:l,closeModal:h}]=C(t=>c(this,null,function*(){yield m(),l({confirmLoading:!1}),e.value=!!(t!=null&&t.isUpdate);let M=t.record;i({field:"value",label:a[M.type]}),yield i([{field:"type",componentProps:{options:p,onChange:y=>{i({field:"value",label:a[y.target.value]})}}},{field:"name",dynamicRules:()=>[{required:!0,whitespace:!0,message:"\u6807\u8BC6\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{max:80,message:"\u5B57\u7B26\u957F\u5EA6\u4E0D\u80FD\u5927\u4E8E80\uFF01"}]}]),s(g({},t.record))})),v=T(()=>x(e)?"\u4FEE\u6539":"\u65B0\u589E");function E(){return c(this,null,function*(){try{l({confirmLoading:!0});const t=yield n();yield L(t),h(),r("success")}finally{l({confirmLoading:!1})}})}return{registerModal:F,registerForm:u,getTitle:v,handleSubmit:E}}});function G(o,r,e,p,a,u){const m=B("BasicForm"),i=B("BasicModal");return O(),U(i,q(o.$attrs,{onRegister:o.registerModal,title:o.getTitle,onOk:o.handleSubmit}),{default:V(()=>[j(m,{onRegister:o.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var De=R(z,[["render",G]]);export{De as default};
