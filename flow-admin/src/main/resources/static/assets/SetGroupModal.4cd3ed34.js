var e=Object.defineProperty,o=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,s=(o,t,r)=>t in o?e(o,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[t]=r,n=(e,o,t)=>new Promise(((r,a)=>{var i=e=>{try{n(t.next(e))}catch(o){a(o)}},s=e=>{try{n(t.throw(e))}catch(o){a(o)}},n=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,s);n((t=t.apply(e,o)).next())}));import{_ as d,a as l}from"./useModal.b44b8cab.js";import{_ as p}from"./BasicForm.86cd97da.js";import{u as c}from"./useForm.87ab8aa1.js";import{b as m}from"./account.data.952bd624.js";import{b as u}from"./account.03e1e588.js";import{g as f}from"./group.3f46d09b.js";import{k as b,bt as j,r as g,u as v,f as h,K as y,o as x,n as O,Q as w,q as F,N as M}from"./vendor.bc3b2d68.js";import"./index.33a0330f.js";import"./useWindowSizeFn.ade0e88c.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./CountdownInput.0bc8da65.js";import"./uuid.c53863e7.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./download.5032960b.js";import"./StrengthMeter.ae9219d5.js";var P=b({name:"AccountModal",components:{BasicModal:d,BasicForm:p,Select:j},emits:["success","register"],setup(e,{emit:d}){const p=g(!0),b=g([]),j=g("设置组"),[y,{setFieldsValue:x,updateSchema:O,resetFields:w,validate:F}]=c({labelWidth:100,schemas:m,showActionButtonGroup:!1,actionColOptions:{span:23}}),[M,{setModalProps:P,closeModal:S}]=l((e=>n(this,null,(function*(){w(),P({confirmLoading:!1}),p.value=!!(null==e?void 0:e.isUpdate),j.value="给用户【"+e.record.realName+"("+e.record.username+")】设置组";const n=yield f();if(n.forEach((e=>{e.label=e.name,e.value=e.id})),b.value=n,v(p)){let n=e.record.groups||[];n=n.map((e=>e.id)),x((d=((e,o)=>{for(var t in o||(o={}))a.call(o,t)&&s(e,t,o[t]);if(r)for(var t of r(o))i.call(o,t)&&s(e,t,o[t]);return e})({},e.record),o(d,t({groups:n}))))}var d}))));return{registerModal:M,registerForm:y,getTitle:h((()=>v(p)?j.value:"新增")),groupOptions:b,handleSubmit:function(){return n(this,null,(function*(){try{P({confirmLoading:!0});const e=yield F();e.groups=e.groups.map((e=>({id:e}))),e.userId=e.id,delete e.id,yield u(e),S(),d("success")}finally{P({confirmLoading:!1})}}))}}}});P.render=function(e,o,t,r,a,i){const s=y("Select"),n=y("BasicForm"),d=y("BasicModal");return x(),O(d,M(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:w((()=>[F(n,{onRegister:e.registerForm},{groups:w((({model:o,field:t})=>[F(s,{value:o[t],"onUpdate:value":e=>o[t]=e,mode:"multiple",style:{width:"100%"},placeholder:"请选择组","option-label-prop":"label",options:e.groupOptions},null,8,["value","onUpdate:value","options"])])),_:1},8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])};export default P;
