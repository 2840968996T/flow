var e=Object.defineProperty,o=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(o,t,i)=>t in o?e(o,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[t]=i,s=(e,o,t)=>new Promise(((i,r)=>{var s=e=>{try{n(t.next(e))}catch(o){r(o)}},a=e=>{try{n(t.throw(e))}catch(o){r(o)}},n=e=>e.done?i(e.value):Promise.resolve(e.value).then(s,a);n((t=t.apply(e,o)).next())}));import{B as a,a as n}from"./index.5b995397.js";import{_ as d}from"./BasicForm.ae4250e1.js";import{u as l}from"./useForm.213a5276.js";import{p as m,e as p}from"./module.data.9746d30b.js";import{g as c}from"./appPrivilegeValue.48e1b2eb.js";import{z as f,r as u,u as b,j,Z as v,D as g,F as x,a3 as y,w as h,a0 as F}from"./vendor.11d66826.js";import"./index.514e05b1.js";import"./useWindowSizeFn.9fecf134.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./index.6b57f630.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./uuid.2b29000c.js";import"./download.0adfd0af.js";import"./base64Conver.bb012c73.js";import"./index.ceaa815e.js";var w=f({name:"PValueSettingModal",components:{BasicModal:a,BasicForm:d},emits:["success","register"],setup(e,{emit:a}){const d=u(!0),[f,{resetFields:v,setFieldsValue:g,updateSchema:x,validate:y}]=l({labelWidth:100,schemas:m,showActionButtonGroup:!1}),[h,{setModalProps:F,closeModal:w}]=n((e=>s(this,null,(function*(){if(v(),F({confirmLoading:!1,title:"设置菜单【"+e.record.name+"】的权限值"}),d.value=!!(null==e?void 0:e.isUpdate),b(d)){g(((e,s)=>{for(var a in s||(s={}))t.call(s,a)&&r(e,a,s[a]);if(o)for(var a of o(s))i.call(s,a)&&r(e,a,s[a]);return e})({},e.record));let s=(yield c())||[];s.forEach((e=>{e.value=e.position,e.label=e.name}));const a=e.record.pvs.map((e=>e.position));x({field:"pvs",componentProps:{options:s}}),g({pvs:a})}}))));return{registerModal:h,registerForm:f,getTitle:j((()=>b(d)?"设置权限值":"新增")),handleSubmit:function(){return s(this,null,(function*(){try{F({confirmLoading:!0});const e=yield y();e.pvs=e.pvs.map((e=>({position:e}))),yield p(e),w(),a("success")}finally{F({confirmLoading:!1})}}))}}}});w.render=function(e,o,t,i,r,s){const a=v("BasicForm"),n=v("BasicModal");return g(),x(n,F(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:y((()=>[h(a,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])};export default w;
