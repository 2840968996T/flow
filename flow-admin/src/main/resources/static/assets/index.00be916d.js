import{B as e,a as t}from"./index.08be5da6.js";import{P as a}from"./index.eb6697bf.js";import{j as o,b2 as n,aJ as s,ae as l,aL as i,bW as r,cj as d,cl as p,cm as u,cn as c,r as m,i as f,k as v,l as g,K as h,o as b,m as x,n as w,Y as y,q as j,V as P,ah as C,X as I,N as M,x as O}from"./vendor.686fd1d4.js";/* empty css              *//* empty css              *//* empty css              */import z from"./index.3bd4f5f8.js";import"./modelInfo.94792dd1.js";import"./index.081912a1.js";import"./useWindowSizeFn.d82e06bf.js";import"./useContentViewHeight.95769b80.js";/* empty css              *//* empty css              */import"./onMountedOrActivated.172ad1ec.js";var T=o({props:{title:{type:String,default:"流程预览"}},name:"BpmnPreview",components:{BasicModal:e,PageWrapper:a,Tag:n,Spin:s,Popover:l,Button:i,RadioButtonGroup:i.RadioButtonGroup,FramePage:z,Space:r,Affix:d,PlusCircleOutlined:p,MinusCircleOutlined:u,OneToOneOutlined:c},setup(e,{emit:a}){const o=m(),n=m(),s=m(""),l=m(!1),i=m(""),r=m(1),d=m("bpmnCanvas"+(new Date).getTime()),p=m({}),[u,{setModalProps:c,closeModal:v,changeLoading:g}]=t((e=>{return t=this,a=null,o=function*(){g(!0);try{alert(!1)}catch(e){}finally{g(!1)}},new Promise(((e,n)=>{var s=e=>{try{i(o.next(e))}catch(t){n(t)}},l=e=>{try{i(o.throw(e))}catch(t){n(t)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(s,l);i((o=o.apply(t,a)).next())}));var t,a,o})),h=f((()=>"流程图-"+i.value));return{defaultZoom:r,registerModal:u,flowMsgPopover:n,popoverVisible:l,triggerEl:o,bpmnCanvasId:d,getTitle:h,detailInfo:p,previewUrl:s,processZoomIn:function(e=.1){let t=Math.floor(100*r.value+100*e)/100;if(t>4)throw new Error("[Process Designer Warn ]: The zoom ratio cannot be greater than 4");r.value=t,null.get("canvas").zoom(r.value)},processZoomOut:function(e=.1){let t=Math.floor(100*r.value-100*e)/100;if(t<.2)throw new Error("[Process Designer Warn ]: The zoom ratio cannot be less than 0.2");r.value=t,null.get("canvas").zoom(r.value)},processReZoom:function(){r.value=1,null.get("canvas").zoom("fit-viewport","auto")}}}});const _=O();v("data-v-1a78bbe2");const B={style:{position:"absolute",left:"10px",top:"10px","z-index":"999"}},Z={class:"containers",ref:"container"},R={class:"popover-title"},k=y(" 审批人员：");g();const D=_(((e,t,a,o,n,s)=>{const l=h("MinusCircleOutlined"),i=h("Button"),r=h("PlusCircleOutlined"),d=h("OneToOneOutlined"),p=h("RadioButtonGroup"),u=h("Tag"),c=h("Popover"),m=h("BasicModal");return b(),x(m,M({wrapClassName:"bpmn-viewer-container"},e.$attrs,{onRegister:e.registerModal,title:e.getTitle}),{default:_((()=>[w("div",B,[w(p,{value:"center"},{default:_((()=>[w(i,{value:"small",title:"缩小视图",style:{width:"40px"},size:"small",onClick:t[1]||(t[1]=t=>e.processZoomOut())},{icon:_((()=>[w(l)])),_:1}),w(i,{value:"default",size:"small",style:{width:"50px"}},{default:_((()=>[y(j(Math.floor(10*e.defaultZoom*10)+"%"),1)])),_:1}),w(i,{value:"large",title:"放大视图",style:{width:"40px"},size:"small",onClick:t[2]||(t[2]=t=>e.processZoomIn())},{icon:_((()=>[w(r)])),_:1}),w(i,{value:"center",title:"重置视图并居中",style:{width:"40px"},size:"small",onClick:t[3]||(t[3]=t=>e.processReZoom())},{default:_((()=>[w(d)])),_:1})])),_:1})]),w("div",Z,[w("div",{id:e.bpmnCanvasId,class:"bpmnCanvas canvas",ref:"bpmnCanvas",style:{width:100*e.scale+"%",height:100*e.scale+"%"}},null,12,["id"])],512),w(c,{overlayClassName:"flowMsgPopover",ref:"flowMsgPopover",visible:!0},{title:_((()=>[w("h1",R,j(e.detailInfo.name),1)])),content:_((()=>[w("p",null,[k,e.detailInfo.approver?(b(!0),x(P,{key:0},C(e.detailInfo.approver.split(";"),(e=>(b(),x(u,{color:"processing",style:{"margin-right":"4px","margin-bottom":"4px"},key:e},{default:_((()=>[y(j(e),1)])),_:2},1024)))),128)):I("",!0)]),w("p",null,"节点类型："+j(e.detailInfo.nodeType||""),1),w("p",null,"节点状态："+j(e.detailInfo.status||""),1),w("p",null,"开始时间："+j(e.detailInfo.startDate||""),1),w("p",null,"结束时间："+j(e.detailInfo.endDate||""),1),w("p",null,"审批耗时："+j(e.detailInfo.duration||""),1)])),_:1},512)])),_:1},16,["onRegister","title"])}));T.render=D,T.__scopeId="data-v-1a78bbe2";export default T;
