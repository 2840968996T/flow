var r;import e from"./DetailModal.884b42e3.js";import{_ as o}from"./TableImg.7eb6c017.js";import{f as t}from"./BasicForm.86cd97da.js";import{u as i}from"./useTable.5323312b.js";import{b as a}from"./useModal.b44b8cab.js";import{av as s,d as n,aY as l}from"./index.33a0330f.js";import{getColumns as c}from"./data.eb381715.js";import{k as d,r as m,D as p,J as u,am as f,K as b,o as j,n as g,V as x,ah as v,w as y,v as E,q as h,Q as w,Y as D,s as k}from"./vendor.bc3b2d68.js";import"./Description.vue_vue&type=script&lang.62b528c6.js";/* empty css              */import"./useDescription.3f4caabe.js";/* empty css              *//* empty css              */import"./useForm.87ab8aa1.js";/* empty css              *//* empty css              *//* empty css              */import"./uuid.c53863e7.js";import"./useWindowSizeFn.ade0e88c.js";import"./onMountedOrActivated.06aaefd7.js";/* empty css              */import"./useSortable.a66d7f9a.js";import"./useExpose.c4c32617.js";/* empty css              *//* empty css              *//* empty css              */import"./CountdownInput.0bc8da65.js";/* empty css              *//* empty css              */import"./download.5032960b.js";import"./StrengthMeter.ae9219d5.js";(r||(r={})).Error="/error";var C=d({name:"ErrorHandler",components:{DetailModal:e,BasicTable:o,TableAction:t},setup(){const e=m(),o=m([]),{t:t}=n(),d=l(),[b,{setTableData:j}]=i({title:t("sys.errorLog.tableTitle"),columns:c(),actionColumn:{width:80,title:"Action",dataIndex:"action",slots:{customRender:"action"}}}),[g,{openModal:x}]=a();return p((()=>d.getErrorLogInfoList),(r=>{u((()=>{j(f(r))}))}),{immediate:!0}),{register:b,registerModal:g,handleDetail:function(r){e.value=r,x(!0)},fireVueError:function(){throw new Error("fire vue error!")},fireResourceError:function(){o.value.push(`${(new Date).getTime()}.png`)},fireAjaxError:function(){return e=this,o=null,t=function*(){yield s.get({url:r.Error})},new Promise(((r,i)=>{var a=r=>{try{n(t.next(r))}catch(e){i(e)}},s=r=>{try{n(t.throw(r))}catch(e){i(e)}},n=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,s);n((t=t.apply(e,o)).next())}));var e,o,t},imgList:o,rowInfo:e,t:t}}});const L={class:"p-4"};C.render=function(r,e,o,t,i,a){const s=b("DetailModal"),n=b("a-button"),l=b("TableAction"),c=b("BasicTable");return j(),g("div",L,[(j(!0),g(x,null,v(r.imgList,(r=>y((j(),g("img",{key:r,src:r},null,8,["src"])),[[E,!1]]))),128)),h(s,{info:r.rowInfo,onRegister:r.registerModal},null,8,["info","onRegister"]),h(c,{onRegister:r.register,class:"error-handle-table"},{toolbar:w((()=>[h(n,{onClick:r.fireVueError,type:"primary"},{default:w((()=>[D(k(r.t("sys.errorLog.fireVueError")),1)])),_:1},8,["onClick"]),h(n,{onClick:r.fireResourceError,type:"primary"},{default:w((()=>[D(k(r.t("sys.errorLog.fireResourceError")),1)])),_:1},8,["onClick"]),h(n,{onClick:r.fireAjaxError,type:"primary"},{default:w((()=>[D(k(r.t("sys.errorLog.fireAjaxError")),1)])),_:1},8,["onClick"])])),action:w((({record:e})=>[h(l,{actions:[{label:r.t("sys.errorLog.tableActionDesc"),onClick:r.handleDetail.bind(null,e)}]},null,8,["actions"])])),_:1},8,["onRegister"])])};export default C;
