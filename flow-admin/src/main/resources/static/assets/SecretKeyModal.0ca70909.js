var $=Object.defineProperty;var M=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var A=(t,r,e)=>r in t?$(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,D=(t,r)=>{for(var e in r||(r={}))K.call(r,e)&&A(t,e,r[e]);if(M)for(var e of M(r))k.call(r,e)&&A(t,e,r[e]);return t};var F=(t,r,e)=>new Promise((n,i)=>{var C=s=>{try{a(e.next(s))}catch(l){i(l)}},g=s=>{try{a(e.throw(s))}catch(l){i(l)}},a=s=>s.done?n(s.value):Promise.resolve(s.value).then(C,g);a((e=e.apply(t,r)).next())});import{B as R,a as T}from"./index.e8eb4b57.js";import{B as V}from"./BasicForm.51e3eb56.js";import{u as j}from"./useForm.d201bd46.js";import{a as z}from"./app.data.a468cf41.js";import{r as E}from"./app.944c893d.js";import{p as f,s as I,az as L,a as N,D as U,I as Q,fB as H,w,ft as x,j as v,h as G,aB as m,o as S,k as O,B as u,C as _,t as q,n as W,aC as J,G as X}from"./index.da587afe.js";import{S as Y}from"./index.5d1da0c4.js";import"./useWindowSizeFn.3fdab581.js";import"./FullscreenOutlined.3d903e0f.js";/* empty css              *//* empty css               */import"./index.a64c8a60.js";import"./index.492229cd.js";import"./Checkbox.9d75a86f.js";import"./index.5aab84c4.js";import"./index.9d0fc194.js";import"./index.447b3242.js";import"./index.d7c8b760.js";import"./index.b3a5d1df.js";import"./get.40c34cfc.js";import"./index.a85fa86f.js";import"./eagerComputed.3bbb876f.js";import"./index.3c9c3a6f.js";import"./_baseIteratee.78d8c020.js";import"./DeleteOutlined.690086a4.js";import"./index.d1cda802.js";import"./useRefs.1aead304.js";import"./Form.f8b72655.js";import"./Col.4ac749bb.js";import"./useFlexGapSupport.caa26b6d.js";import"./useSize.dbee3c08.js";import"./transButton.1d3b575b.js";import"./index.72d53e09.js";import"./index.813f510f.js";import"./uuid.2b29000c.js";import"./download.75f04d3f.js";import"./base64Conver.08b9f4ec.js";import"./index.9912aa68.js";import"./index.36675b6e.js";import"./uniqBy.f906dabc.js";var Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"},ee=Z;function P(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?Object(arguments[r]):{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),n.forEach(function(i){te(t,i,e[i])})}return t}function te(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var b=function(r,e){var n=P({},r,e.attrs);return f(I,P({},n,{icon:ee}),null)};b.displayName="QuestionCircleOutlined";b.inheritAttrs=!1;var re=b;const{TextArea:oe}=Q,ne=N({name:"SecretKeyModal",components:{BasicModal:R,BasicForm:V,Button:U,Input:Q,TextArea:oe,Space:Y,Popconfirm:H,QuestionCircleOutlined:re},emits:["success","register"],setup(t,{emit:r}){const e=w(!0),n=w(""),{createMessage:i}=X(),{clipboardRef:C,copiedRef:g}=x(),[a,{resetFields:s,setFieldsValue:l}]=j({labelWidth:150,schemas:z,showActionButtonGroup:!1}),[B,{setModalProps:d}]=T(o=>F(this,null,function*(){yield s(),d({confirmLoading:!1}),e.value=!!(o!=null&&o.isUpdate);let y=o.record;n.value=y.secretKey,v(e)&&l(D({},o.record))})),h=G(()=>v(e)?"\u4FEE\u6539":"\u65B0\u589E");function c(o){return F(this,null,function*(){try{d({confirmLoading:!0});const y=yield E(o.id);n.value=y,l({secretKey:y})}finally{d({confirmLoading:!1})}})}function p(){try{const o=v(n);if(!o){i.warning("\u8BF7\u91CD\u65B0\u83B7\u53D6\u5BC6\u94A5\uFF01");return}C.value=o,v(g)&&i.success("\u62F7\u8D1D\u6210\u529F\uFF01")}finally{d({confirmLoading:!1})}}return{registerModal:B,registerForm:a,getTitle:h,handleCopy:p,refreshSecretKeyHandle:c}}}),ie={class:""};function se(t,r,e,n,i,C){const g=m("TextArea"),a=m("a-button"),s=m("QuestionCircleOutlined"),l=m("Popconfirm"),B=m("Space"),d=m("BasicForm"),h=m("BasicModal");return S(),O(h,J(t.$attrs,{onRegister:t.registerModal,title:t.getTitle}),{default:u(()=>[f(d,{onRegister:t.registerForm},{snSlot:u(({model:c,field:p})=>[_(q(c[p]),1)]),secretKeySlot:u(({model:c,field:p})=>[W("div",ie,[f(g,{readonly:"",rows:3,value:c[p],"onUpdate:value":o=>c[p]=o},null,8,["value","onUpdate:value"]),f(B,{class:"mt-2"},{default:u(()=>[c[p]?(S(),O(l,{key:1,title:"\u786E\u5B9A\u8981\u91CD\u65B0\u751F\u6210\u79D8\u94A5\u5417\uFF1F",onConfirm:o=>t.refreshSecretKeyHandle(c)},{icon:u(()=>[f(s,{style:{color:"red"}})]),default:u(()=>[f(a,null,{default:u(()=>[_(" \u66F4\u65B0\u5BC6\u94A5 ")]),_:1})]),_:2},1032,["onConfirm"])):(S(),O(a,{key:0,onClick:o=>t.refreshSecretKeyHandle(c)},{default:u(()=>[_(" \u751F\u6210\u5BC6\u94A5 ")]),_:2},1032,["onClick"])),f(a,{type:"primary",onClick:t.handleCopy},{default:u(()=>[_(" \u590D\u5236 ")]),_:1},8,["onClick"])]),_:2},1024)])]),_:1},8,["onRegister"])]),_:1},16,["onRegister","title"])}var qe=L(ne,[["render",se]]);export{qe as default};
