var _=Object.defineProperty;var d=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var f=(o,r,e)=>r in o?_(o,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[r]=e,g=(o,r)=>{for(var e in r||(r={}))b.call(r,e)&&f(o,e,r[e]);if(d)for(var e of d(r))w.call(r,e)&&f(o,e,r[e]);return o};var c=(o,r,e)=>new Promise((p,a)=>{var u=s=>{try{i(e.next(s))}catch(n){a(n)}},m=s=>{try{i(e.throw(s))}catch(n){a(n)}},i=s=>s.done?p(s.value):Promise.resolve(s.value).then(u,m);i((e=e.apply(o,r)).next())});import{B as k,a as C}from"./index.e8eb4b57.js";import{B as P}from"./BasicForm.51e3eb56.js";import{u as A}from"./useForm.d201bd46.js";import{k as D,l as L}from"./listener.data.79c5069c.js";import{az as R,a as $,w as S,h as T,j as x,aB as B,o as O,k as U,B as V,p as j,aC as q}from"./index.da587afe.js";import"./useWindowSizeFn.3fdab581.js";import"./FullscreenOutlined.3d903e0f.js";/* empty css              *//* empty css               */import"./index.a64c8a60.js";import"./index.492229cd.js";import"./Checkbox.9d75a86f.js";import"./index.5aab84c4.js";import"./index.9d0fc194.js";import"./index.447b3242.js";import"./index.d7c8b760.js";import"./index.b3a5d1df.js";import"./get.40c34cfc.js";import"./index.a85fa86f.js";import"./eagerComputed.3bbb876f.js";import"./index.3c9c3a6f.js";import"./_baseIteratee.78d8c020.js";import"./DeleteOutlined.690086a4.js";import"./index.d1cda802.js";import"./useRefs.1aead304.js";import"./Form.f8b72655.js";import"./Col.4ac749bb.js";import"./useFlexGapSupport.caa26b6d.js";import"./useSize.dbee3c08.js";import"./transButton.1d3b575b.js";import"./index.5d1da0c4.js";import"./index.72d53e09.js";import"./index.813f510f.js";import"./uuid.2b29000c.js";import"./download.75f04d3f.js";import"./base64Conver.08b9f4ec.js";import"./index.9912aa68.js";import"./index.36675b6e.js";import"./uniqBy.f906dabc.js";const z=$({name:"ListenerPropertiesModal",components:{BasicModal:k,BasicForm:P},emits:["success","register"],setup(o,{emit:r}){const e=S(!0);let p=[{label:"\u5B57\u7B26\u4E32",value:"string"},{label:"\u8868\u8FBE\u5F0F",value:"expression"}],a={};p.forEach(t=>{a[t.value]=t.label});const[u,{resetFields:m,updateSchema:i,setFieldsValue:s,validate:n}]=A({labelWidth:100,schemas:D,showActionButtonGroup:!1}),[F,{setModalProps:l,closeModal:h}]=C(t=>c(this,null,function*(){yield m(),l({confirmLoading:!1}),e.value=!!(t!=null&&t.isUpdate);let M=t.record;i({field:"value",label:a[M.type]}),yield i([{field:"type",componentProps:{options:p,onChange:y=>{i({field:"value",label:a[y.target.value]})}}},{field:"name",dynamicRules:()=>[{required:!0,whitespace:!0,message:"\u6807\u8BC6\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{max:80,message:"\u5B57\u7B26\u957F\u5EA6\u4E0D\u80FD\u5927\u4E8E80\uFF01"}]}]),s(g({},t.record))})),v=T(()=>x(e)?"\u4FEE\u6539":"\u65B0\u589E");function E(){return c(this,null,function*(){try{l({confirmLoading:!0});const t=yield n();yield L(t),h(),r("success")}finally{l({confirmLoading:!1})}})}return{registerModal:F,registerForm:u,getTitle:v,handleSubmit:E}}});function G(o,r,e,p,a,u){const m=B("BasicForm"),i=B("BasicModal");return O(),U(i,q(o.$attrs,{onRegister:o.registerModal,title:o.getTitle,onOk:o.handleSubmit}),{default:V(()=>[j(m,{onRegister:o.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var De=R(z,[["render",G]]);export{De as default};
