var _=Object.defineProperty;var d=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var f=(o,r,e)=>r in o?_(o,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[r]=e,g=(o,r)=>{for(var e in r||(r={}))b.call(r,e)&&f(o,e,r[e]);if(d)for(var e of d(r))w.call(r,e)&&f(o,e,r[e]);return o};var c=(o,r,e)=>new Promise((p,a)=>{var u=s=>{try{i(e.next(s))}catch(n){a(n)}},m=s=>{try{i(e.throw(s))}catch(n){a(n)}},i=s=>s.done?p(s.value):Promise.resolve(s.value).then(u,m);i((e=e.apply(o,r)).next())});import{B as k,a as C}from"./index.56ac9033.js";import{B as P}from"./BasicForm.bc1bc2ec.js";import{u as A}from"./useForm.35a2e1b5.js";import{k as D,l as L}from"./listener.data.114185e4.js";import{az as R,a as $,w as S,h as T,j as x,aB as B,o as O,k as U,B as V,p as j,aC as q}from"./index.bbfb8c5d.js";import"./useWindowSizeFn.daa22200.js";import"./FullscreenOutlined.7b1f5985.js";/* empty css              *//* empty css               */import"./index.eb776706.js";import"./index.08f5b20b.js";import"./Checkbox.6b0f0619.js";import"./index.932444ce.js";import"./index.bd278e5f.js";import"./index.e860cc21.js";import"./index.ba9876ed.js";import"./index.53f3ac38.js";import"./get.476f8b78.js";import"./index.424465cb.js";import"./eagerComputed.2918d49d.js";import"./index.d0de3318.js";import"./_baseIteratee.6836a2b9.js";import"./DeleteOutlined.426a7a56.js";import"./index.21d11494.js";import"./useRefs.c946e576.js";import"./Form.64d057a8.js";import"./Col.bf638c61.js";import"./useFlexGapSupport.ae09cf13.js";import"./useSize.2da926c0.js";import"./transButton.15723253.js";import"./index.dbc537d6.js";import"./index.1311bc71.js";import"./index.59bf1cba.js";import"./uuid.2b29000c.js";import"./download.4c3fda74.js";import"./base64Conver.08b9f4ec.js";import"./index.5d0a6eed.js";import"./index.5796c3bd.js";import"./uniqBy.16bfb902.js";const z=$({name:"ListenerPropertiesModal",components:{BasicModal:k,BasicForm:P},emits:["success","register"],setup(o,{emit:r}){const e=S(!0);let p=[{label:"\u5B57\u7B26\u4E32",value:"string"},{label:"\u8868\u8FBE\u5F0F",value:"expression"}],a={};p.forEach(t=>{a[t.value]=t.label});const[u,{resetFields:m,updateSchema:i,setFieldsValue:s,validate:n}]=A({labelWidth:100,schemas:D,showActionButtonGroup:!1}),[F,{setModalProps:l,closeModal:h}]=C(t=>c(this,null,function*(){yield m(),l({confirmLoading:!1}),e.value=!!(t!=null&&t.isUpdate);let M=t.record;i({field:"value",label:a[M.type]}),yield i([{field:"type",componentProps:{options:p,onChange:y=>{i({field:"value",label:a[y.target.value]})}}},{field:"name",dynamicRules:()=>[{required:!0,whitespace:!0,message:"\u6807\u8BC6\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{max:80,message:"\u5B57\u7B26\u957F\u5EA6\u4E0D\u80FD\u5927\u4E8E80\uFF01"}]}]),s(g({},t.record))})),v=T(()=>x(e)?"\u4FEE\u6539":"\u65B0\u589E");function E(){return c(this,null,function*(){try{l({confirmLoading:!0});const t=yield n();yield L(t),h(),r("success")}finally{l({confirmLoading:!1})}})}return{registerModal:F,registerForm:u,getTitle:v,handleSubmit:E}}});function G(o,r,e,p,a,u){const m=B("BasicForm"),i=B("BasicModal");return O(),U(i,q(o.$attrs,{onRegister:o.registerModal,title:o.getTitle,onOk:o.handleSubmit}),{default:V(()=>[j(m,{onRegister:o.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var De=R(z,[["render",G]]);export{De as default};
